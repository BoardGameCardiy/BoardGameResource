<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>Marp Markdown 渲染器</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/github-markdown-css/github-markdown.min.css"
    >
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        .markdown-body {
            max-width: 900px;
            margin: 40px auto;
            padding: 20px;
        }

        .slide {
            border: 1px solid #ddd;
            margin-bottom: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 8px #eee;
        }

        ul#mdList {
            max-width: 900px;
            margin: 40px auto 0;
            padding: 0;
            list-style: none;
        }

        ul#mdList li {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
        }

        ul#mdList li:hover {
            background: #f5f5f5;
        }
    </style>
</head>

<body>
    <ul id="mdList">
        <!-- 示例：你可以自行添加更多项 -->
        <li data-src="event.1.md">event-a</li>
        <li data-src="event.2.md">event-b</li>
    </ul>
    <div id="slides"></div>
    <script>
        document.getElementById('mdList').addEventListener('click', async function (e) {
            if (e.target.tagName.toLowerCase() === 'li') {
                const src = e.target.getAttribute('data-src');
                if (!src) return;
                const res = await fetch(src);
                if (!res.ok) {
                    alert('无法加载文件: ' + src);
                    return;
                }
                const text = await res.text();
                // Marp slides are separated by '---' at the start of a line
                const slides = text.split(/^---$/m);
                const slidesDiv = document.getElementById('slides');
                slidesDiv.innerHTML = '';
                slides.forEach((slide, idx) => {
                    const html = marked.parse(slide);
                    const slideDiv = document.createElement('div');
                    slideDiv.className = 'markdown-body slide';
                    slideDiv.innerHTML = html;
                    slidesDiv.appendChild(slideDiv);
                });
            }
        });
    </script>
</body>

</html>